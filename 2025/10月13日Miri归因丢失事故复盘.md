# 10月13日Miri归因丢失事故复盘

## 事故概述

**发生时间：** 2025年10月13日 12:14
**发现人：** 汇鲸
**问题：** Miri包的精准归因回收极少，Metabase统计不到归因数据
**影响：** FB W2A投放的归因数据丢失（安装80%来自Facebook Web）

## 问题现象

- Miri包精准归因数据几乎为0
- 苍老师那边也遇到同样问题：ATT允许就有归因，不允许就无归因
- 客户端上传的归因参数显示为 `No User Consent`

## 排查时间线

| 时间 | 事件 | 负责人 |
|------|------|--------|
| 10月13日 12:14 | 汇鲸发现归因数据异常 | 汇鲸 |
| 10月13日 | 怀疑后端归因问题，查日志发现是客户端参数问题 | 博宇 |
| 10月14日 14:25-21:05 | 定位到ATT弹窗问题，用Adjust测试链接验证正常 | 我 |
| 10月16日 17:10 | 永恒反馈可能不是ATT问题，重测10次发现是偶发性问题 | 我 |
| 10月16日 17:19 | 联系Adjust商务排查 | 我+志斌 |
| 10月16日 17:24 | 商务反馈可能是白名单未开通 | Adjust商务 |
| 10月16日 17:55 | 手动加白完成，测试归因恢复正常 | Adjust |

## 根本原因

**Adjust白名单配置遗漏**

- 应用数量太多，Adjust使用script批量处理白名单
- script执行过程中存在遗漏可能性
- 白名单在管理后台不可见，无法主动监控

## 解决方案

- Adjust手动处理白名单配置
- 归因数据恢复正常

## 改进措施

1. **流程优化：** 每周用脚本跑一次白名单配置
2. **监控机制：** Adjust客服及时同步异常给志斌
3. **当前限制：** 白名单在后台不可见，暂无法做主动监控

## 经验教训

- 归因问题优先排查Adjust配置，而不是代码逻辑
- 偶发性问题需要多次测试验证
- 第三方服务的批量配置需要人工校验机制
